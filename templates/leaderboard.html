<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ lab.code }} Leaderboard | MCK Infra Labs</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <div class="noise"></div>
    <header class="topbar">
      <div class="brand">MCK Infra Labs</div>
      <nav class="top-links">
        <a class="ghost-link" href="/">Lab hub</a>
        <a class="ghost-link" href="/labs/{{ lab.id }}">Back to {{ lab.code }}</a>
        <a class="ghost-link" href="/admin">Admin</a>
      </nav>
    </header>

    <main class="page">
      <div id="lab-context" data-lab-id="{{ lab.id }}" data-compare-enabled="{{ 'true' if lab.compare_enabled else 'false' }}"></div>

      <section class="hero lab-hero">
        <div class="badge">{{ lab.code }}</div>
        <h1>Leaderboard</h1>
        <p>Track lab-specific submissions and verification status.</p>
      </section>

      <section class="panel">
        <div class="results-header">
          <h2>Progress board</h2>
          <button type="button" id="refresh-leaderboard" class="ghost">Refresh board</button>
        </div>
        {% if lab.compare_enabled %}
        <div class="status ok" id="compare-timer" data-interval-seconds="{{ compare_interval_seconds }}">
          Next sync check in {{ compare_interval_seconds }}s
        </div>
        {% else %}
        <div class="status">Manual review in progress.</div>
        {% endif %}
        <div id="leaderboard-list" class="students-list"></div>
      </section>

      {% if lab.automation_enabled %}
      <section class="panel">
        <div class="results-header">
          <h2>Auto-fill logs</h2>
          <span id="log-count">0 entries</span>
        </div>
        <div class="status" id="auto-fill-timer" data-next-seconds="0">Automation pending</div>
        <div class="status">Next entry: <span id="auto-fill-entry">Pending</span></div>
        <div class="log-box" id="log-box"></div>
      </section>
      {% endif %}
    </main>

    <script src="/static/app.js"></script>
  </body>
</html>
